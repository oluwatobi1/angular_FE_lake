<!-- Page Heading -->
<section class="wrapper ct-scan-heading">
  <h1 class="text-center">CT-SCAN PAGE</h1>
  <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Voluptas molestiae ad alias neque repellendus atque nobis,
    saepe excepturi cupiditate illo itaque perspiciatis vitae beatae esse dolorum aut, ipsum suscipit quo! <br><br>Lorem
    ipsum dolor sit, amet consectetur adipisicing elit. Ab consequuntur inventore quia minima porro. Minima maiores nisi
    officiis consequuntur culpa rem vero perferendis nulla, facilis praesentium perspiciatis nobis vel enim.</p>
</section>



<!-- Image Upload Section -->
<section class="ct-scan-uploadSection wrapper">
  <div class="row flex card">

    <div class="uploadSection-upload col-sm-12 col-md-6">
      <div name="imageUpload" id="ctScanForm" class="card">
        <div class="form-control">
          <label for="name">(Optional) Img Identifier </label>
          <input type="text" id="name" (change)="onTextchange($event)">
          <input type="file" (change)="onImagechange($event)" name="Choose Image" class="">
        </div>
        <div class="progress" *ngIf="progress">
          <div class="progress-bar" [style.width]="progress + '%'">{{progress}}%</div>
        </div>
<!-- Input button -->
        <input type="submit" value="Submit Image" class="btn btn-primary" name="submit" [disabled]="!image"
          (click)="newImage()">

      </div>

      <div *ngIf="message=='Upload Completed'" class="alert alert-success" role="alert">
        {{ message }}
      </div>
      <div *ngIf="message=='Upload failed'" class="alert alert-danger" role="alert">
        {{ message }}
      </div>
    </div>

    <div *ngIf="imagearray.prediction==''" class="uploadSection-preview col-sm-12 col-md-6">
      <img src="https://via.placeholder.com/200x100/000000/FFFFFF/?text=upload image here" alt="placeholder"
        id="previewImage">
    </div>
    <div *ngIf="imagearray.prediction!=''" class="uploadSection-preview col-sm-12 col-md-6">
      <img src="{{imagearray.image}}" alt="placeholder" id="previewImage">
    </div>
  </div>
</section>


<!-- fgd -->
<!-- 
  <div class="row justify-content-md-center">    
    <div class="col-md-auto">
      <label for="name">Image ID </label>
      <input type="text" id="name" (change)="onTextchange($event)">      
    </div>
  </div> -->
<!-- 
  <div class="row justify-content-md-center">    
    <div class="col-md-auto">
      <input type="file" (change)="onImagechange($event)">
    </div>
  </div> -->
<!-- 
<br>
  <div class="row justify-content-md-center">   
    <div class="col-md-auto">
      <button class="btn btn-primary" [disabled]="!image" (click)="newImage()"> Upload</button>
    </div>
  </div>

  <div class="progress" *ngIf="progress">
    <div class="progress-bar" [style.width]="progress + '%'">{{progress}}%</div>
  </div> -->
<!-- 
  <br><br>
  <div class="row justify-content-md-center">   
    <div class="col-md-auto">
 
  <div *ngIf="message=='Upload Completed'" class="alert alert-success" role="alert">
    {{ message }}
  </div>
  <div *ngIf="message=='Upload failed'" class="alert alert-danger" role="alert">
    {{ message }}
  </div>
  </div>
  </div> -->

<!-- Out put section -->



<br>

    <!-- Scan Result Section -->
    <section class="wrapper ct-scan-result" *ngIf="imagearray.prediction!=''">
      <h2 class="text-center">SCAN Result</h2>
      

      <div class="result-wrapper flex">

          <div class="card flex">

            <div class="card-heading">
              <div class="source-title-div">
                  <h5 class="card-title">Prediction</h5>
              </div>
            </div>
            
            <div class="card-body">
              <p class="card-text" id="ctScanResult1">Prediction is 
                {{prediction}}</p>
            </div>

          </div>

          <div class="card flex">

            <div class="card-heading">
              <div class="source-title-div">
                  <h5 class="card-title">Confidence</h5>
              </div>
            </div>
            
            <div class="card-body">
              <p class="card-text" id="ctScanResult2">Confidence of {{confidence}}</p>

            </div>

          </div>


      </div>

  </section>

  <section class="ct-scan-result-analysis wrapper"> 
    <h2 class="text-center">SCAN Result Analysis</h2>
    <p>
      Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aut maxime dolores tempora quam soluta id dolore commodi. Impedit eveniet quidem sit. Culpa architecto esse corrupti nemo aperiam provident tenetur deserunt.<br><br>
      Saepe velit praesentium, nobis autem omnis blanditiis cupiditate ducimus dignissimos fugit provident, esse minima ipsam. Ratione sit voluptate cupiditate, placeat rem exercitationem explicabo perspiciatis at ullam illum, tempore unde tenetur!<br><br>
  </section>
  
  <section class=" wrapper ct-scan-summary">
    <h2>Summary</h2>
    <p>
      First we prepare the data following below steps: </p>

      <ol>
        <li>Import COVID-19/Non_COVID-19 images files names into a train DataFrame with their labels. Then coping the last rows for testing DataFrame and delete them from the train df.
</li>
        <li>Shuffle training dfs, converting each to tensors and join all three train dfs into one big train df shape (3456, 256, 256, 3), and test (700)
</li>
        <li>Apply Data Augmentation (random rotation, shift, flip, zoom, shear transforms) on all three datasets images generating new 2000 images for generalizing the model as much as possible.
</li>
        <li>Join new images' dataset, after importing them to df and convert to tensors. the final training/testing dfs (5535, 256, 256, 3) ,and testing (1100, 256, 256, 3).
</li>
        <li>Import pretrained model “EfficientNetB6” from tensorflow.keras.applications and add our input shape (256,256,3), full connected layers (2048, 512,128) with ReLu as activation function, plus BatchNormalization with dropout (0.1 or 0.2) methods each. Finally, output layer for 2 classes with softmax as activation functions.
</li>
        <li> Train the data and save the weights for best max val_accurecy or min loss metrics.
</li>
        <li>Fine tune the model with extra very low learning rate for the optimization function.
</li>
        <li>Test the result and achieve high accuracy 91% on the testing 1100 images.
</li>
      </ol>

  </section>

